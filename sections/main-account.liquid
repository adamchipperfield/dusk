<div class="main-account__header">
  <h1 class="text-h3">{{ 'customer.account.title' | t }}</h1>

  {{ 'customer.account.logout' | t | link_to: routes.account_logout_url, class: 'text-link' }}
</div>

<div class="main-account__body grid">
  <div class="col xs12 l8">
    <h2 class="main-account__subheading text-h4">{{ 'customer.account.orders' | t }}</h2>

    {% if customer.orders.size > 0 %}
      {% paginate customer.orders by section.settings.orders_per_page %}
        <table>
          <thead>
            <tr>
              <th>{{ 'customer.order.number' | t }}</th>
              <th>{{ 'customer.order.date' | t }}</th>
              <th>{{ 'customer.order.payment_status' | t }}</th>
              <th>{{ 'customer.order.fulfillment_status' | t }}</th>
              <th>{{ 'customer.order.total' | t }}</th>
            </tr>
          </thead>

          <tbody>
            {% for order in customer.orders %}
              <tr>
                <td>
                  <span class="text-th" data-label="{{ 'customer.order.number' | t }}"></span>
                  <span class="value text-link">{{ order.name | link_to: order.customer_url }}</span>
                </td>

                <td>
                  <span class="text-th" data-label="{{ 'customer.order.date' | t }}"></span>
                  <span class="value">{{ order.created_at | time_tag: format: 'date' }}</span>
                </td>

                <td>
                  <span class="text-th" data-label="{{ 'customer.order.payment_status' | t }}"></span>
                  <span class="value">{{ order.financial_status_label }}</span>
                </td>

                <td>
                  <span
                    class="text-th"
                    data-label="{{ 'customer.order.fulfillment_status' | t }}"
                  ></span>
                  <span class="value">{{ order.fulfillment_status_label }}</span>
                </td>

                <td>
                  <span class="text-th" data-label="{{ 'customer.order.total' | t }}"></span>
                  <span class="value">{{ order.total_price | money }}</span>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        <div class="pagination">{{ paginate | default_pagination }}</div>
      {% endpaginate %}

    {% else %}
      <p>{{ 'customer.account.no_orders' | t }}</p>
    {% endif %}
  </div>

  <div class="col xs12 l4">
    <h2 class="main-account__subheading text-h5">{{ 'customer.account.addresses' | t }}</h2>

    <p class="label">{{ 'customer.account.default_address' | t }}</p>

    <address>
      {{ customer.default_address | format_address }}
    </address>

    {{ 'customer.account.all_addresses' | t | link_to: routes.account_addresses_url, class: 'text-link' }}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main-account.name",
  "class": "main-account container",
  "settings": [
    {
      "type": "range",
      "id": "orders_per_page",
      "label": "t:sections.main-account.settings.orders_per_page.label",
      "min": 1,
      "max": 48,
      "default": 12
    }
  ]
}
{% endschema %}
